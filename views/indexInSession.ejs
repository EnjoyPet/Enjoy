<!DOCTYPE html>
<html lang="es">
  <head>
    <!-- Título de la página, incluido dinámicamente -->
    <title>Enjoyourpet - <%= data.usuario %></title>
    
    <!-- Inclusión de un archivo de enlace de metal, utilizando EJS -->
    <%- include("./partials/metalink.ejs") %>
  </head>
  <body>
    <!-- Inclusión del encabezado de la página, utilizando EJS -->
    <%- include('./partials/header.ejs') %>

    <!-- Contenido principal de la página -->
    <main>
      <!-- Sección del carrusel de imágenes -->
      <section class="width-90" id="carousel-container">
        <div id="carousel">
          <div id="carousel-text"><h1></h1></div>
          <img
            class="img-carousel hide"
            src="/resources/img/carousel/001.jpg"
            alt="imagen 1 del carousel"
          />
          <img
            class="img-carousel hide"
            src="/resources/img/carousel/002.jpg"
            alt="imagen 2 del carousel"
          />
          <img
            class="img-carousel hide"
            src="/resources/img/carousel/003.jpg"
            alt="imagen 3 del carousel"
          />
          <img
            class="img-carousel hide"
            src="/resources/img/carousel/004.jpg"
            alt="imagen 4 del carousel"
          />
          <img
            class="img-carousel hide"
            src="/resources/img/carousel/005.jpg"
            alt="imagen 5 del carousel"
          />
        </div>
      </section>
       <!-- Sección de productos -->
       <% if(productos.length > 0) {%>
        <section class="width-90" id="productosContainer">
          <!-- Iteración sobre la lista de productos -->
          <% productos.forEach(producto => { %>
          <div class="productocontainer" onclick="linkTo('ver','producto','<%= producto.id_producto %>')">
            <h5 class="productotitulo"><%= producto.nombre %></h5>
            <!-- Imagen del producto, convertida de Buffer a base64 -->
            <img class="producto_img" src="data:image/jpeg;base64,<%= producto.imagen_producto.toString('base64') %>" alt="imagen del producto" />
            <h3 class="listado_1 article__price">$ <%= producto.precio %> COP</h3>
          </div>
          <% }) %>
        </section>
        <% } else { %>
        <!-- Sección de mensaje de productos agotados -->
        <section style="flex-direction: column">
          <div class="listado_1">
            <h1 class="listado_1">¡SE ACABARON!</h1>
            <h3>lo sentimos, ya no tenemos mas productos para ofrecer.</h3>
          </div>
          <!-- Botón para redirigir a la página de venta -->
          <div class="btn__flex">
            <a href="/vender" class="btn__eyp btnshwanim--blur btn__hover--blur">Vende ahora</a>
          </div>
        </section>
        <% } %>
      </main>
  
      <!-- Inclusión del pie de página, utilizando EJS -->
      <%- include('./partials/footer.ejs') %>
      
      <!-- Scripts JavaScript -->
      <script src="/resources/js/carousel.js"></script>
      <script src="/resources/js/anim.js"></script>
    </body>
  </html>